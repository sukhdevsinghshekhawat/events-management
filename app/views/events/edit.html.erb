<h1 class="mb-4 text-center"><%= @event.new_record? ? "Create New Event" : "Edit Event" %></h1>

<div class="card shadow p-4 mx-auto" style="max-width: 600px;">
  <%= form_with(model: @event, local: true, class: "needs-validation") do |form| %>

    <% if @event.errors.any? %>
      <div class="alert alert-danger">
        <h4><%= pluralize(@event.errors.count, "error") %> prevented this event from being saved:</h4>
        <ul>
          <% @event.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div class="mb-3">
      <%= form.label :title, "Title", class: "form-label" %>
      <%= form.text_field :title, class: "form-control", placeholder: "Enter event title" %>
    </div>

    <div class="mb-3">
      <%= form.label :description, "Description", class: "form-label" %>
      <%= form.text_area :description, rows: 4, class: "form-control", placeholder: "Enter event description" %>
    </div>

    <div class="mb-3">
      <%= form.label :venue, "Venue", class: "form-label" %>
      <%= form.text_field :venue, class: "form-control", placeholder: "Enter event venue" %>
    </div>

    <div class="mb-3">
      <%= form.label :date, "Date", class: "form-label" %>
      <%= form.date_select :date, {}, class: "form-select" %>
    </div>

    <div class="row mb-3">
      <div class="col">
        <%= form.label :start_time, "Start Time", class: "form-label" %>
        <%= form.time_select :start_time, {}, class: "form-select" %>
      </div>
      <div class="col">
        <%= form.label :end_time, "End Time", class: "form-label" %>
        <%= form.time_select :end_time, {}, class: "form-select" %>
      </div>
    </div>

    <!-- Hidden teacher_id, current_user is admin -->
    <%= form.hidden_field :teacher_id, value: current_user.id %>

    <div class="d-grid gap-2">
      <%= form.submit @event.new_record? ? "Create Event" : "Update Event", class: "btn btn-primary" %>
      <%= link_to 'Back', events_path, class: "btn btn-secondary" %>
    </div>
  <% end %>
</div>
